# Air Mouse v2.0

使用電腦攝像頭進行手勢識別，實現無接觸滑鼠控制。

## 功能特色

- **食指移動控制**：使用食指移動控制滑鼠指標
- **空白鍵點擊**：按下鍵盤空白鍵進行左鍵點擊
- **圖形化介面**：直觀的控制面板，即時預覽攝像頭畫面
- **即時調整**：可調整畫面方向、處理頻率等參數
- **GPU 加速**：自動檢測並使用 GPU 加速（如可用）
- **模組化設計**：清晰的代碼結構，易於維護和擴展

## 系統需求

- Python 3.8+
- 攝像頭設備
- Windows/macOS/Linux

## 安裝與使用

### 1. 安裝依賴

```bash
pip install -r requirements.txt
```

### 2. 啟動程式

#### 圖形化介面模式（推薦）
```bash
python app.py
```
或雙擊 `run_gui.bat`

#### 命令行模式（高效能）
```bash
python app.py --no-preview
```

### 3. 操作說明

#### 基本操作
- **滑鼠移動**：將食指放在綠色框內，移動食指控制滑鼠
- **左鍵點擊**：按下鍵盤空白鍵

#### UI 控制
- **啟動/停止**：點擊「啟動」按鈕開始手勢追蹤
- **處理頻率**：調整 FPS 滑桿改變處理頻率
- **畫面方向**：使用旋轉、翻轉按鈕調整攝像頭畫面
- **測試點擊**：使用「測試點擊」按鈕驗證點擊功能

## 命令行參數

```bash
python app.py [選項]

選項：
  --no-preview     使用命令行模式（無GUI，提升效能）
  --fps FPS        設定處理頻率 (10-100)
  --no-gpu         禁用 GPU 加速
  --rotation ANGLE 設定初始旋轉角度 (0, 90, 180, 270)
  --flip-h         水平翻轉畫面
  --flip-v         垂直翻轉畫面
```

## 項目結構

```
air-mouse-v2/
├── app.py                 # 主程式入口
├── run_gui.bat           # Windows 啟動腳本
├── requirements.txt      # 依賴清單
├── core/                 # 核心功能模組
│   ├── air_mouse.py     # 主要控制邏輯
│   ├── gestures.py      # 手勢檢測
│   ├── config.py        # 配置參數
│   └── gpu_detector.py  # GPU 檢測
├── ui/                   # 使用者介面
│   └── main_window.py   # GUI 主視窗
├── utils/                # 工具模組
│   └── image_processing.py
└── tests/               # 測試文件
    └── test_ui_integration.py
```

## 設定調整

### 主要參數（config.py）

- `CAMERA_AREA_RATIO`：檢測區域大小比例
- `CAMERA_VERTICAL_OFFSET`：檢測區域垂直偏移
- `DEFAULT_SMOOTHING_FACTOR`：滑鼠移動平滑度
- `DEFAULT_FRAME_PROCESS_INTERVAL`：處理間隔

### 最佳化使用

1. **光線條件**：確保充足光線以便準確手部識別
2. **攝像頭位置**：將攝像頭放置在穩定位置，避免晃動
3. **手部位置**：保持手部在綠色框內，距離攝像頭適中
4. **處理頻率**：根據電腦效能調整 FPS（高效能電腦可設定較高 FPS）

## 疑難排解

### 常見問題

1. **攝像頭無法開啟**
   - 確認攝像頭已連接且未被其他程式佔用
   - 檢查攝像頭驅動程式

2. **手勢識別不準確**
   - 調整光線條件
   - 確保手部在檢測區域內
   - 嘗試調整畫面方向

3. **效能問題**
   - 降低處理頻率（FPS）
   - 使用命令行模式（--no-preview）
   - 關閉其他占用 GPU 的程式

4. **空白鍵點擊無效**
   - 確認程式有足夠權限
   - 檢查是否有其他程式攔截空白鍵

## 版本歷史

### v2.0
- 重新設計的圖形化使用者介面
- 簡化手勢系統（只保留食指移動 + 空白鍵點擊）
- 優化效能與穩定性
- 模組化架構重構

### v1.0
- 基本手勢識別功能
- 命令行介面
- 多種手勢支援

## 授權

本專案採用 MIT 授權條款。

## 貢獻

歡迎提交 Issue 和 Pull Request 來改善這個專案！
